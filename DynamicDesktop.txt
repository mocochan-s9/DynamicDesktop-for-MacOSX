-- リストで与えられたファイル名の付加部分(4文字)と時刻(hhmm)を比較して-- その時間を過ぎていたら、そのファイル名のデスクトップ画像に設定する-- 一番目より前の時刻の場合は最後の画像を採用する-- -- 画像フォルダは "~/Pictures" からの相対パス-- 各時刻で読み込まれるファイルは-- "~/Pictures/[画像フォルダ名]/[画像ファイル名の共通部分]-[hhmm].[表示画像の拡張子]"-- 以下のProperty Listを"~/Pictures/DynamicDesktop.plist"に保存-- <?xml version="1.0" encoding="UTF-8"?>-- <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">-- <plist version="1.0">-- <dict>--    <key>BasePath</key>--    <string>[画像フォルダ名]</string>--    <key>BaseName</key>--    <string>[画像ファイル名の共通部分]</string>--    <key>FileList</key>--    <array>--        <!-- 時刻(hhmm)を昇順で記述 -->--        <string>0200</string>--        <string>0600</string>--        <string>1000</string>--        <string>2200</string>--    </array>--  <!-- 表示画像の拡張子 -->--    <key>extension</key>--    <string>png</string>-- </dict>-- </plist>---- AppleScriptを実行専用アプリ(DynamicDesktop)で保存してターミナルからcrontab -eで以下の行を追加-- （1時間毎に実行の場合）-- 0 * * * * /Applications/DynamicDesktop.app/Contents/MacOS/applet-- ホームパスset myPath to (path to home folder) as textset PosixMyPath to POSIX path of myPath-- PropertyList Pathset thePropertyListFilePath to PosixMyPath & "/Pictures/DynamicDesktop.plist"tell application "System Events"	tell property list file thePropertyListFilePath		-- フォルダパス		set BaseDir to value of property list item "BasePath"		-- ファイル名の共通部分		set BaseName to value of property list item "BaseName"		-- 時刻ごとのファイル名付加部分		set TimeList to value of property list item "FileList"		-- 表示画像の拡張子		set extStr to value of property list item "extension"	end tellend tellset BaseDir to PosixMyPath & "/Pictures/" & BaseDir & "/"set extStr to "." & extStr-- 現在時刻set TimeStr to time string of (current date) as text-- 時刻がzero suppressされている場合if length of TimeStr < 8 then	set TimeStr to "0" & TimeStrend if-- hh:mm:ss -> hhmmset TimeHour to text 1 thru 2 of TimeStr & text 4 thru 5 of TimeStrset maxItem to length of TimeList-- 最後のファイル名を設定するset DDPath to BaseDir & BaseName & "-" & item maxItem of TimeList & extStr-- display dialog curPathrepeat with idx from maxItem to 1 by -1	set curItem to item idx of TimeList	set curPath to BaseDir & BaseName & "-" & curItem & extStr	if curItem ≤ TimeHour then		set DDPath to curPath as text		exit repeat	end ifend repeat-- display dialog DDPathchangeDesktopPicture(DDPath)-- return DDPath-- サブルーチン: --   デスクトップ画像を所定のファイルに変更する on changeDesktopPicture(aFilePath)	tell application "Finder"		try			set desktop picture to POSIX file (aFilePath)		on error			"ファイルが見つかりません。" & return & return			display dialog result & aFilePath		end try	end tellend changeDesktopPicture